(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-319a2c6c"],{"8d7d":function(t,a,i){"use strict";i("a2b3")},a2b3:function(t,a,i){},f013:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"tw-template-wrapper"},[i("div",{staticClass:"tw-circle",on:{click:t.handleExtractClick}},[t._v("抽取")]),i("div",{staticClass:"tw-circle",on:{click:t.handleHistoryClick}},[t._v("查看历史记录")]),i("el-dialog",{attrs:{"custom-class":"tw-dialog__small",width:"600px",title:"抽取",visible:t.dialog.display,"before-close":t.handleDialogClose},on:{"update:visible":function(a){return t.$set(t.dialog,"display",a)}}},[i("el-form",{attrs:{"label-width":"150px"}},[i("el-form-item",{attrs:{label:"选择要抽取的单位："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dialog.form.dw,callback:function(a){t.$set(t.dialog.form,"dw",a)},expression:"dialog.form.dw"}},t._l(t.dialog.form.dwOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})})),1)],1),i("div",{staticClass:"tw_form_item"},[i("div",{staticClass:"tw_form_item_label"},[i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleDialogExtractClick}},[t._v("开始抽取")])],1),i("div",{staticClass:"tw_form_item_content"},[t._v(" "+t._s(t.dialog.form.result)+" ")])])],1)],1)],1)},s=[],l=(i("d81d"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("a474")),o=i("c46f"),r={name:"choujiang",data:function(){return{userid:"",loading:!1,dialog:{display:!1,btnLoading:!1,form:{dw:"",dwOptions:[],result:"",resultId:""}}}},mounted:function(){this.$cookies.get("userid")||this.$store.state.userid||this.$router.push({path:"/login"}),this.$cookies.get("userid")?this.userid=this.$cookies.get("userid"):this.userid=this.$store.state.userid,this.getDw()},methods:{handleDialogClose:function(){this.dialog.form.dw="",this.dialog.form.result="",this.dialog.display=!1},handleSubmitDialog:function(){var t=this;if(!this.dialog.form.result)return this.$message.error("请先抽取");this.dialog.btnLoading=!0;var a=new URLSearchParams;a.append("file_id",this.dialog.form.resultId),a.append("user_id",this.userid),l["a"].get("vehicleRepair/insertExtractRecord",{params:a}).then((function(a){200==a.data.state?(t.$message.success("保存成功"),t.handleDialogClose()):t.$message.error("保存失败"),t.dialog.btnLoading=!1}))},handleHistoryClick:function(){this.$router.push({path:"/random"})},getDw:function(){var t=this;l["a"].get("vehicleRepair/findCompany").then((function(a){t.dialog.form.dwOptions=o["a"].map(a.data.data,(function(t,a){return{value:a,label:t.company_name}}))}))},handleExtractClick:function(){this.dialog.display=!0},handleDialogExtractClick:function(){var t=this;if(!this.dialog.form.dw)return this.$message.warning("请先选择单位");this.loading=!0,this.dialog.form.result="";var a=new URLSearchParams;a.append("company_name",this.dialog.form.dw),a.append("user_id",this.userid),l["a"].get("vehicleRepair/extract",{params:a}).then((function(a){200==a.data.state?(t.$message.success("抽取成功"),t.dialog.form.result=a.data.data.file_number,t.dialog.form.resultId=a.data.data.id):t.$message.error("抽取失败"),t.loading=!1}))}}},d=r,n=(i("8d7d"),i("2877")),c=Object(n["a"])(d,e,s,!1,null,"26bc3314",null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-319a2c6c.e8b13de0.js.map