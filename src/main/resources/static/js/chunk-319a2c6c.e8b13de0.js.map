{"version":3,"sources":["webpack:///./src/views/Choujiang.vue?0c97","webpack:///./src/views/Choujiang.vue?748a","webpack:///src/views/Choujiang.vue","webpack:///./src/views/Choujiang.vue?a893","webpack:///./src/views/Choujiang.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleExtractClick","_v","handleHistoryClick","attrs","dialog","display","handleDialogClose","$event","$set","model","value","form","callback","$$v","expression","_l","item","key","label","loading","handleDialogExtractClick","_s","result","staticRenderFns","name","data","userid","btnLoading","dw","dwOptions","resultId","mounted","$cookies","get","$store","state","getDw","methods","handleSubmitDialog","$message","error","params","append","res","$router","push","index","company_name","warning","component"],"mappings":"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","file":"js/chunk-319a2c6c.e8b13de0.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Choujiang.vue?vue&type=style&index=0&id=26bc3314&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-template-wrapper\"},[_c('div',{staticClass:\"tw-circle\",on:{\"click\":_vm.handleExtractClick}},[_vm._v(\"抽取\")]),_c('div',{staticClass:\"tw-circle\",on:{\"click\":_vm.handleHistoryClick}},[_vm._v(\"查看历史记录\")]),_c('el-dialog',{attrs:{\"custom-class\":\"tw-dialog__small\",\"width\":\"600px\",\"title\":\"抽取\",\"visible\":_vm.dialog.display,\"before-close\":_vm.handleDialogClose},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialog, \"display\", $event)}}},[_c('el-form',{attrs:{\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"选择要抽取的单位：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.dialog.form.dw),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"dw\", $$v)},expression:\"dialog.form.dw\"}},_vm._l((_vm.dialog.form.dwOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.label}})}),1)],1),_c('div',{staticClass:\"tw_form_item\"},[_c('div',{staticClass:\"tw_form_item_label\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleDialogExtractClick}},[_vm._v(\"开始抽取\")])],1),_c('div',{staticClass:\"tw_form_item_content\"},[_vm._v(\" \"+_vm._s(_vm.dialog.form.result)+\" \")])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tw-template-wrapper\">\r\n    <div class=\"tw-circle\" @click=\"handleExtractClick\">抽取</div>\r\n    <div class=\"tw-circle\" @click=\"handleHistoryClick\">查看历史记录</div>\r\n    <el-dialog\r\n      custom-class=\"tw-dialog__small\"\r\n      width=\"600px\"\r\n      title=\"抽取\"\r\n      :visible.sync=\"dialog.display\"\r\n      :before-close=\"handleDialogClose\"\r\n    >\r\n      <el-form label-width=\"150px\">\r\n        <el-form-item label=\"选择要抽取的单位：\">\r\n          <el-select v-model=\"dialog.form.dw\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in dialog.form.dwOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.label\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <div class=\"tw_form_item\">\r\n          <div class=\"tw_form_item_label\">\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"handleDialogExtractClick\"\r\n              :loading=\"loading\"\r\n              >开始抽取</el-button\r\n            >\r\n          </div>\r\n          <div class=\"tw_form_item_content\">\r\n            {{ dialog.form.result }}\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n      <!-- <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleDialogClose\">取 消</el-button>\r\n        <el-button\r\n          type=\"primary\"\r\n          :loading=\"dialog.btnLoading\"\r\n          @click=\"handleSubmitDialog\"\r\n          >确 定</el-button\r\n        >\r\n      </span> -->\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ajaxT } from 'assets/js/api'\r\nimport _ from 'underscore'\r\nexport default {\r\n  name: 'choujiang',\r\n  data() {\r\n    return {\r\n      userid: '',\r\n      loading: false,\r\n      dialog: {\r\n        display: false,\r\n        btnLoading: false,\r\n        form: {\r\n          dw: '',\r\n          dwOptions: [],\r\n          result: '',\r\n          resultId: '',\r\n        },\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    if (!this.$cookies.get('userid') && !this.$store.state.userid)\r\n      this.$router.push({ path: '/login' })\r\n    if (!this.$cookies.get('userid')) this.userid = this.$store.state.userid\r\n    else this.userid = this.$cookies.get('userid')\r\n    this.getDw()\r\n  },\r\n  methods: {\r\n    // 关闭\r\n    handleDialogClose() {\r\n      this.dialog.form.dw = ''\r\n      this.dialog.form.result = ''\r\n      this.dialog.display = false\r\n    },\r\n    // 提交\r\n    handleSubmitDialog() {\r\n      if (!this.dialog.form.result) return this.$message.error('请先抽取')\r\n      this.dialog.btnLoading = true\r\n      const params = new URLSearchParams()\r\n      params.append('file_id', this.dialog.form.resultId)\r\n      params.append('user_id', this.userid)\r\n      ajaxT.get('vehicleRepair/insertExtractRecord', { params }).then((res) => {\r\n        if (res.data.state == 200) {\r\n          this.$message.success('保存成功')\r\n          this.handleDialogClose()\r\n        } else this.$message.error('保存失败')\r\n        this.dialog.btnLoading = false\r\n      })\r\n    },\r\n    // 查看历史记录\r\n    handleHistoryClick() {\r\n      this.$router.push({ path: '/random' })\r\n    },\r\n    // 单位下拉框\r\n    getDw() {\r\n      ajaxT.get('vehicleRepair/findCompany').then((res) => {\r\n        this.dialog.form.dwOptions = _.map(res.data.data, (item, index) => {\r\n          return {\r\n            value: index,\r\n            label: item.company_name,\r\n          }\r\n        })\r\n      })\r\n    },\r\n    // 抽取\r\n    handleExtractClick() {\r\n      this.dialog.display = true\r\n    },\r\n    handleDialogExtractClick() {\r\n      if (!this.dialog.form.dw) return this.$message.warning('请先选择单位')\r\n      this.loading = true\r\n      this.dialog.form.result = ''\r\n      const params = new URLSearchParams()\r\n      params.append('company_name', this.dialog.form.dw)\r\n      params.append('user_id', this.userid)\r\n      ajaxT\r\n        .get('vehicleRepair/extract', {\r\n          params,\r\n        })\r\n        .then((res) => {\r\n          if (res.data.state == 200) {\r\n            this.$message.success('抽取成功')\r\n            this.dialog.form.result = res.data.data.file_number\r\n            this.dialog.form.resultId = res.data.data.id\r\n          } else this.$message.error('抽取失败')\r\n          this.loading = false\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tw-template-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n// 旋转动画\r\n@keyframes tw-spin {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n.tw-circle {\r\n  position: relative;\r\n  margin: 0 200px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 200px;\r\n  height: 200px;\r\n  border: 4px solid #95c2fa;\r\n  border-radius: 50%;\r\n  box-sizing: border-box;\r\n  font-size: 30px;\r\n  color: #5c9ced;\r\n  background-color: #ffffff;\r\n  user-select: none;\r\n  cursor: pointer;\r\n  transition: box-shadow 0.3s ease-in-out, text-shadow 0.3s ease-in-out;\r\n  &:hover {\r\n    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);\r\n    text-shadow: 0 0 4px #8cb8f1;\r\n    &::before {\r\n      animation-play-state: running;\r\n    }\r\n  }\r\n  &::before {\r\n    content: '';\r\n    position: absolute;\r\n    top: -15px;\r\n    left: -15px;\r\n    width: calc(100% + 30px);\r\n    height: calc(100% + 30px);\r\n    border-radius: 50%;\r\n    background-image: url('../assets/img/circle-dotted-line.svg');\r\n    background-size: 100%;\r\n    animation: tw-spin 8s linear infinite;\r\n    animation-play-state: paused;\r\n  }\r\n}\r\n.tw-dialog-content {\r\n  .el-select {\r\n    display: block;\r\n  }\r\n  text-align: center;\r\n  .el-button {\r\n    margin-top: 20px;\r\n    padding: 12px 25px;\r\n    // font-size: 15px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Choujiang.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Choujiang.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Choujiang.vue?vue&type=template&id=26bc3314&scoped=true&\"\nimport script from \"./Choujiang.vue?vue&type=script&lang=js&\"\nexport * from \"./Choujiang.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Choujiang.vue?vue&type=style&index=0&id=26bc3314&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26bc3314\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}